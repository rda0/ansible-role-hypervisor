- name: install packages for bootstrap-lv
  packages:
    state: present
    pkg:
      - cdebootstrap
      - ubuntu-archive-keyring
      - parted
      - kpartx

- name: create directory /opt
  file:
    path: /opt
    state: directory

- name: clone git repo bootstrap-lv to /opt/bootstrap-lv
  git:
    repo: git@gitlab.phys.ethz.ch:core/bootstrap-lv.git
    dest: /opt/bootstrap-lv
    accept_hostkey: yes
    update: yes
    depth: 1

- name: create bootstrap-lv symlink in /usr/local/bin
  file:
    src: /opt/bootstrap-lv/bootstrap
    dest: /usr/local/bin/bootstrap-lv
    state: link
